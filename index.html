<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Todo List</title>
    <script type="module" src="scripttodo.js" defer></script>
  </head>
  <body>
    <!-- <h1>todos</h1>
    <form id="form">
      <input type="text" class="input" id="input" placeholder="Enter your todo" autocomplete="off">

      <ul class="todos" id="todos"></ul>
    </form>
    <small>Left click to toggle completed. <br> Right click to delete todo</small> -->

     <div class="container">
      <div class="todo_app">
        <h2>TO-DO LIST <img src=".\images\logo.png" alt="todo_list_logo"> </h2>
        <div class="row">
          <h4>Add task:</h4>
          <input type="text" id="input_task" placeholder="Add your task">
          <h4>Target date:</h4>
          <input type="date" id="input_date">
          <button id="add_task_button" onclick="addTask()">Add Task</button>
          <button id="logout_button">Logout</button>
        </div>

        <ul id="list_container"> 
          <!-- <li class="checked">Task 1  </li>
          <li>Task 2  </li>
          <li>Task 3  </li>-->

        </ul> 
      </div>
     </div>
 
    <script type="module">
      
    // Your web app's Firebase configuration
      
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app); // Optional, for Analytics
      const auth = getAuth(); // Initialize Firebase Authentication
      const db = getFirestore(app); // Initialize Firestore

      // Authentication Check and Logout
      onAuthStateChanged(auth, (user) => {
        if (!user) {
          // Redirect to login if not authenticated
          window.location.replace('login.html');

        } else {
          // User is signed in.  You can access user.uid here.
          console.log("User is logged in:", user.uid);
          // Call displayTasks() or other functions to load user-specific data.
          // Make sure displayTasks() is adapted to load data only for the current user.
          displayTasks();
        }
      });

      const logoutButton = document.getElementById("logout_button");
      logoutButton.addEventListener("click", () => {
        signOut(auth)
          .then(() => {
            // Sign-out successful.
            console.log("User signed out");
            window.location.replace('login.html');

          })
          .catch((error) => {
            // An error happened.
            console.error("Sign out error", error);
          });
      });
    </script>
    <script type="module" src="scripttodo.js" defer></script>

    
  </body>
</html>