<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets\style.css" />
    <!-- bootstrap css -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> -->
    <title>Todo List</title>
    <script type="module" src="assets\js\scripttodo.js" defer></script>
    <script type="module" src="https://unpkg.com/ionicons@latest/dist/ionicons/ionicons.esm.js"></script>
     <script nomodule src="https://unpkg.com/ionicons@latest/dist/ionicons/ionicons.js"></script>
     <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

     <script src="https://cdnjs.cloudflare.com/ajax/libs/notify/0.4.2/notify.min.js"></script>
     <!-- bootstrap js -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>


    <link rel="stylesheet" href="https://unpkg.com/ionicons@5.5.2/dist/css/ionicons.min.css">
  </head>
  <body>

    
     <div class="container">

      <nav>
        <div class="nav-tabs">
            <button class="tab-btn" data-filter="all" onclick="displayTasks('all')">All</button>
            <button class="tab-btn" data-filter="upcoming" onclick="displayTasks('upcoming')">Upcoming</button>
            <button class="tab-btn" data-filter="completed" onclick="displayTasks('completed')">Completed</button>
            <button class="tab-btn" data-filter="overdue" onclick="displayTasks('overdue')">Overdue</button>
        </div>
    </nav>
<!-- <ul id="task-list">
        <li class="task upcoming">Go to Gym (2025-03-29)</li>
        <li class="task completed">Help (2025-03-27)</li>
        <li class="task overdue">Test test test (2025-03-26)</li>
    </ul> -->
      
      
      <div class="todo_app">
        <h2>TO-DO LIST <img src="assets\images\logo.png" alt="todo_list_logo"> </h2>
        <div class="row">
          <h4>Add task:</h4>
          <input type="text" id="input_task" placeholder="Add your task">
          <h4>Target date:</h4>
          <input type="date" id="input_date">
          <button id="add_task_button" onclick="addTask()">Add Task</button>
          <!-- <button id="logout_button">Logout</button> -->
        </div>

        <ul id="list_container"> 
          <!-- <li class="checked">Task 1  </li>
          <li>Task 2  </li>
          <li>Task 3  </li>-->

        </ul> 
        <button id="logout_button">LogOut</button>
      </div>
     </div>

<script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js" type="module"></script>
<script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js" type="module"></script>
<script src="https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js" type="module"></script>

 
    <script type="module">
       import { initializeApp } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";
       import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";
       import { getFirestore } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js";
       import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.4.0/firebase-analytics.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCjnP5ilEeUqkW_hpBqsJrUcldlVoBjf4k",
    authDomain: "mytodolist-fa068.firebaseapp.com",
    projectId: "mytodolist-fa068",
    storageBucket: "mytodolist-fa068.firebasestorage.app",
    messagingSenderId: "1037050677970",
    appId: "1:1037050677970:web:1270451c9d9f1024abfb0b",
    measurementId: "G-E4N3XBX79H"
  };
    // Your web app's Firebase configuration
      
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app); // Optional, for Analytics
      const auth = getAuth(app); // Initialize Firebase Authentication
      const db = getFirestore(app); // Initialize Firestore

      // Authentication Check and Logout
      onAuthStateChanged(auth, (user) => {
        document.body.style.display = "block";
        if (!user) {
          // Redirect to login if not authenticated
          window.location.replace('login.html');

        } else {
          // User is signed in.  You can access user.uid here.
          document.body.style.display = "block";
          console.log("User is logged in:", user.uid);
          // Call displayTasks() or other functions to load user-specific data.
          // Make sure displayTasks() is adapted to load data only for the current user.
          displayTasks(user.uid);
        }
      });

      const logoutButton = document.getElementById("logout_button");
      logoutButton.addEventListener("click", () => {
        signOut(auth)
          .then(() => {
            // Sign-out successful.
            console.log("User signed out");
            window.location.replace('login.html');

          })
          .catch((error) => {
            // An error happened.
            console.error("Sign out error", error);
          });
      });
    </script>
    <script type="module" src=".\scripttodo.js" defer></script>

    
  </body>
</html>